<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>회원/인증 | XE3 가이드 문서</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="XE3 가이드 문서">
    <link rel="preload" href="/xe3-doc/assets/css/0.styles.e9ee09ad.css" as="style"><link rel="preload" href="/xe3-doc/assets/js/app.76304fcc.js" as="script"><link rel="preload" href="/xe3-doc/assets/js/2.587667cf.js" as="script"><link rel="preload" href="/xe3-doc/assets/js/80.51578898.js" as="script"><link rel="prefetch" href="/xe3-doc/assets/js/10.57948f23.js"><link rel="prefetch" href="/xe3-doc/assets/js/11.fecad70b.js"><link rel="prefetch" href="/xe3-doc/assets/js/12.27a5bb09.js"><link rel="prefetch" href="/xe3-doc/assets/js/13.b172c327.js"><link rel="prefetch" href="/xe3-doc/assets/js/14.da8aaa48.js"><link rel="prefetch" href="/xe3-doc/assets/js/15.0b36b24e.js"><link rel="prefetch" href="/xe3-doc/assets/js/16.fca16dee.js"><link rel="prefetch" href="/xe3-doc/assets/js/17.6305561a.js"><link rel="prefetch" href="/xe3-doc/assets/js/18.a434d577.js"><link rel="prefetch" href="/xe3-doc/assets/js/19.876d6157.js"><link rel="prefetch" href="/xe3-doc/assets/js/20.f53151d0.js"><link rel="prefetch" href="/xe3-doc/assets/js/21.70365815.js"><link rel="prefetch" href="/xe3-doc/assets/js/22.31cf7805.js"><link rel="prefetch" href="/xe3-doc/assets/js/23.40cc3185.js"><link rel="prefetch" href="/xe3-doc/assets/js/24.a06ce1e1.js"><link rel="prefetch" href="/xe3-doc/assets/js/25.09c52c95.js"><link rel="prefetch" href="/xe3-doc/assets/js/26.e75a13d8.js"><link rel="prefetch" href="/xe3-doc/assets/js/27.fa6613e2.js"><link rel="prefetch" href="/xe3-doc/assets/js/28.85af2809.js"><link rel="prefetch" href="/xe3-doc/assets/js/29.afff3386.js"><link rel="prefetch" href="/xe3-doc/assets/js/3.ac98112a.js"><link rel="prefetch" href="/xe3-doc/assets/js/30.f71492bf.js"><link rel="prefetch" href="/xe3-doc/assets/js/31.6240829d.js"><link rel="prefetch" href="/xe3-doc/assets/js/32.3f9c71ea.js"><link rel="prefetch" href="/xe3-doc/assets/js/33.a1d5553c.js"><link rel="prefetch" href="/xe3-doc/assets/js/34.0cba113d.js"><link rel="prefetch" href="/xe3-doc/assets/js/35.0e8fd88d.js"><link rel="prefetch" href="/xe3-doc/assets/js/36.8739696f.js"><link rel="prefetch" href="/xe3-doc/assets/js/37.3e6d3291.js"><link rel="prefetch" href="/xe3-doc/assets/js/38.21071671.js"><link rel="prefetch" href="/xe3-doc/assets/js/39.32947bd9.js"><link rel="prefetch" href="/xe3-doc/assets/js/4.728af792.js"><link rel="prefetch" href="/xe3-doc/assets/js/40.9997bca4.js"><link rel="prefetch" href="/xe3-doc/assets/js/41.8351078e.js"><link rel="prefetch" href="/xe3-doc/assets/js/42.66b591d4.js"><link rel="prefetch" href="/xe3-doc/assets/js/43.4f4d6bc2.js"><link rel="prefetch" href="/xe3-doc/assets/js/44.f690c560.js"><link rel="prefetch" href="/xe3-doc/assets/js/45.d1992aa2.js"><link rel="prefetch" href="/xe3-doc/assets/js/46.3f0a5770.js"><link rel="prefetch" href="/xe3-doc/assets/js/47.129b2e11.js"><link rel="prefetch" href="/xe3-doc/assets/js/48.71b19ee6.js"><link rel="prefetch" href="/xe3-doc/assets/js/49.6547541b.js"><link rel="prefetch" href="/xe3-doc/assets/js/5.5585d8d7.js"><link rel="prefetch" href="/xe3-doc/assets/js/50.32e695cb.js"><link rel="prefetch" href="/xe3-doc/assets/js/51.b1fd9d73.js"><link rel="prefetch" href="/xe3-doc/assets/js/52.bf53132e.js"><link rel="prefetch" href="/xe3-doc/assets/js/53.44be3848.js"><link rel="prefetch" href="/xe3-doc/assets/js/54.bafd8858.js"><link rel="prefetch" href="/xe3-doc/assets/js/55.1b418742.js"><link rel="prefetch" href="/xe3-doc/assets/js/56.2c5bf17c.js"><link rel="prefetch" href="/xe3-doc/assets/js/57.944f11f0.js"><link rel="prefetch" href="/xe3-doc/assets/js/58.f0464f72.js"><link rel="prefetch" href="/xe3-doc/assets/js/59.9c31cf3e.js"><link rel="prefetch" href="/xe3-doc/assets/js/6.6714d407.js"><link rel="prefetch" href="/xe3-doc/assets/js/60.bfce6280.js"><link rel="prefetch" href="/xe3-doc/assets/js/61.4d2fe3d4.js"><link rel="prefetch" href="/xe3-doc/assets/js/62.c91dbea7.js"><link rel="prefetch" href="/xe3-doc/assets/js/63.60391993.js"><link rel="prefetch" href="/xe3-doc/assets/js/64.530ec0c5.js"><link rel="prefetch" href="/xe3-doc/assets/js/65.dd2cc186.js"><link rel="prefetch" href="/xe3-doc/assets/js/66.374a6caa.js"><link rel="prefetch" href="/xe3-doc/assets/js/67.a6a27ac6.js"><link rel="prefetch" href="/xe3-doc/assets/js/68.69e9dfc2.js"><link rel="prefetch" href="/xe3-doc/assets/js/69.4aed424e.js"><link rel="prefetch" href="/xe3-doc/assets/js/7.f7226d2c.js"><link rel="prefetch" href="/xe3-doc/assets/js/70.2295f984.js"><link rel="prefetch" href="/xe3-doc/assets/js/71.03cb5805.js"><link rel="prefetch" href="/xe3-doc/assets/js/72.194fd677.js"><link rel="prefetch" href="/xe3-doc/assets/js/73.8f5c98e5.js"><link rel="prefetch" href="/xe3-doc/assets/js/74.6b6732d8.js"><link rel="prefetch" href="/xe3-doc/assets/js/75.1e8c041c.js"><link rel="prefetch" href="/xe3-doc/assets/js/76.cc2ec3c1.js"><link rel="prefetch" href="/xe3-doc/assets/js/77.f2997c1a.js"><link rel="prefetch" href="/xe3-doc/assets/js/78.1789b79e.js"><link rel="prefetch" href="/xe3-doc/assets/js/79.f43d2ef6.js"><link rel="prefetch" href="/xe3-doc/assets/js/8.817a7cc8.js"><link rel="prefetch" href="/xe3-doc/assets/js/81.e8ef26a1.js"><link rel="prefetch" href="/xe3-doc/assets/js/82.522bbb94.js"><link rel="prefetch" href="/xe3-doc/assets/js/83.c1bfa961.js"><link rel="prefetch" href="/xe3-doc/assets/js/84.94c055fc.js"><link rel="prefetch" href="/xe3-doc/assets/js/85.f5144183.js"><link rel="prefetch" href="/xe3-doc/assets/js/86.7db8b9b0.js"><link rel="prefetch" href="/xe3-doc/assets/js/87.d7ed73b8.js"><link rel="prefetch" href="/xe3-doc/assets/js/88.9b0d7040.js"><link rel="prefetch" href="/xe3-doc/assets/js/89.6c40ec6f.js"><link rel="prefetch" href="/xe3-doc/assets/js/9.7a2c1fcd.js"><link rel="prefetch" href="/xe3-doc/assets/js/90.f7f4b6ef.js"><link rel="prefetch" href="/xe3-doc/assets/js/91.71e51af9.js"><link rel="prefetch" href="/xe3-doc/assets/js/92.516c562c.js"><link rel="prefetch" href="/xe3-doc/assets/js/93.1536d71b.js"><link rel="prefetch" href="/xe3-doc/assets/js/94.8adeb6a2.js"><link rel="prefetch" href="/xe3-doc/assets/js/95.0b36db94.js"><link rel="prefetch" href="/xe3-doc/assets/js/96.88acae77.js"><link rel="prefetch" href="/xe3-doc/assets/js/97.71b06025.js"><link rel="prefetch" href="/xe3-doc/assets/js/98.c474de82.js">
    <link rel="stylesheet" href="/xe3-doc/assets/css/0.styles.e9ee09ad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xe3-doc/" class="home-link router-link-active"><!----> <span class="site-name">XE3 가이드 문서</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/xe3-doc/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 시작하기</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 사이트 설정</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 번들 플러그인</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 개발자 문서</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 플러그인 개발</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 테마 개발&amp;제작</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 스킨 개발&amp;제작</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span> 서비스</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xe3-doc/08.%20%EC%84%9C%EB%B9%84%EC%8A%A4/" aria-current="page" class="sidebar-link">서비스</a></li><li><a href="/xe3-doc/08. 서비스/service-captcha.html" class="sidebar-link">캡챠</a></li><li><a href="/xe3-doc/08. 서비스/service-category.html" class="sidebar-link">카테고리</a></li><li><a href="/xe3-doc/08. 서비스/service-config.html" class="sidebar-link">설정</a></li><li><a href="/xe3-doc/08. 서비스/service-cookie.html" class="sidebar-link">쿠키</a></li><li><a href="/xe3-doc/08. 서비스/service-counter.html" class="sidebar-link">카운터</a></li><li><a href="/xe3-doc/08. 서비스/service-database.html" class="sidebar-link">데이터베이스</a></li><li><a href="/xe3-doc/08. 서비스/service-document.html" class="sidebar-link">문서</a></li><li><a href="/xe3-doc/08. 서비스/service-error_catch.html" class="sidebar-link">오류처리</a></li><li><a href="/xe3-doc/08. 서비스/service-event_interception.html" class="sidebar-link">이벤트/인터셉션</a></li><li><a href="/xe3-doc/08. 서비스/service-file_storage.html" class="sidebar-link">파일/스토리지</a></li><li><a href="/xe3-doc/08. 서비스/service-frontend.html" class="sidebar-link">프론트엔드</a></li><li><a href="/xe3-doc/08. 서비스/service-helper.html" class="sidebar-link">헬퍼</a></li><li><a href="/xe3-doc/08. 서비스/service-image-process.html" class="sidebar-link">이미지처리</a></li><li><a href="/xe3-doc/08. 서비스/service-keygen.html" class="sidebar-link">키생성\(Keygen\)</a></li><li><a href="/xe3-doc/08. 서비스/service-mail.html" class="sidebar-link">메일</a></li><li><a href="/xe3-doc/08. 서비스/service-member_auth.html" class="active sidebar-link">회원/인증</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xe3-doc/08. 서비스/service-member_auth.html#회원-인증-user-auth" class="sidebar-link">회원/인증\(user/auth\)</a></li></ul></li><li><a href="/xe3-doc/08. 서비스/service-menu_module.html" class="sidebar-link">메뉴/모듈</a></li><li><a href="/xe3-doc/08. 서비스/service-mobile.html" class="sidebar-link">모바일</a></li><li><a href="/xe3-doc/08. 서비스/service-permission.html" class="sidebar-link">권한</a></li><li><a href="/xe3-doc/08. 서비스/service-session.html" class="sidebar-link">세션</a></li><li><a href="/xe3-doc/08. 서비스/service-themes.html" class="sidebar-link">테마</a></li><li><a href="/xe3-doc/08. 서비스/service-trash.html" class="sidebar-link">휴지통</a></li><li><a href="/xe3-doc/08. 서비스/service-uiobject_form.html" class="sidebar-link">UI오브젝트/폼빌더</a></li><li><a href="/xe3-doc/08. 서비스/service-validation.html" class="sidebar-link">유효성검사</a></li><li><a href="/xe3-doc/08. 서비스/service-widget_box.html" class="sidebar-link">위젯박스</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span> 프론트엔드 (js)</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/xe3-doc/LICENSE.html" class="sidebar-link">/LICENSE.html</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="회원-인증"><a href="#회원-인증" class="header-anchor">#</a> 회원/인증</h1> <h2 id="회원-인증-user-auth"><a href="#회원-인증-user-auth" class="header-anchor">#</a> 회원/인증(user/auth)</h2> <h3 id="회원-및-인증-서비스"><a href="#회원-및-인증-서비스" class="header-anchor">#</a> 회원 및 인증 서비스</h3> <p>XE는 회원정보를 저장하고 관리하는 기능을 제공합니다. 일반적인 회원 관리 기능으로는 신규가입, 회원정보 수정, 회원 삭제와 같은 기능이 있습니다. 또, 인증 시도, 로그인, 로그아웃과 같은 인증 관련 기능도 함께 제공합니다.</p> <p>회원 관리 기능을 정확히 사용하기 위해서는 회원 및 회원의 부가정보들의 데이터 구조를 정확히 파악해야 합니다.</p> <h4 id="데이터-구조"><a href="#데이터-구조" class="header-anchor">#</a> 데이터 구조</h4> <p><strong>회원</strong></p> <p>회원은 사이트에서 가입 및 인증의 대상이 되는 개념으로, 일반적으로 한명의 사람이라고 생각할 수 있습니다. 회원은 사이트 내에서 권한(permission)을 부여받을 수 있는 대상이 될 수 있습니다.</p> <p>XE는 회원정보를 <code>\Xpressengine\User\Models\User</code> 엘로퀀트 모델로 표현하며 <code>user</code> 테이블에 저장합니다.</p> <p><strong>계정</strong></p> <p>일반적인 회원서비스에서는 회원(user)과 계정(account)을 동일 개념으로 처리합니다. 하지만 XE는 소셜로그인과 같은 외부 계정을 통한 가입/인증을 유연하게 적용하기 위하여 회원과 계정의 개념을 분리했습니다. 회원은 기본계정 이외에 다수의 외부 계정을 가질 수 있으며, 다수의 계정 중 하나로 회원을 인증(authentication)하고 로그인할 수 있습니다.</p> <p>만약 소셜로그인과 같이 외부 사이트에서 제공하는 회원서비스를 사용하는 회원가입/로그인 기능을 구현하고 싶다면, 회원 계정을 잘 활용하시길 바랍니다.</p> <p>XE는 계정정보를 <code>\Xpressengine\User\Models\UserAccount</code> 엘로퀀트 모델로 표현하며 <code>user_account</code> 테이블에 저장합니다.</p> <blockquote><p>XE에서는 회원의 계정정보를 등록(저장)하고 조회, 삭제하는 기능만 제공합니다. 계정정보를 이용한 가입 및 인증은 별도의 플러그인(social_login)을 통해 제공합니다.</p></blockquote> <p><strong>이메일</strong></p> <p>한명의 회원은 다수의 '승인된 이메일'을 소유할 수 있습니다. 만약 회원이 다수의 이메일을 소유하고 있다면, 소유한 이메일 중 하나와 비밀번호를 사용하여 로그인 할 수 있습니다.</p> <p>다수의 이메일 중 하나는 회원의 대표 이메일로 지정됩니다. 대표 이메일은 회원에게 이메일을 전송하거나 외부에 공개될 때 사용되는 이메일입니다.</p> <p>XE는 이메일 정보를 <code>\Xpressengine\User\Models\UserEmail</code> 엘로퀀트 모델로 표현하며 <code>user_email</code> 테이블에 저장합니다.</p> <p><strong>승인대기 이메일</strong></p> <p>회원은 하나의 '승인대기 이메일'을 가질 수 있습니다. 신규회원이 가입할 때 입력한 이메일은 승인대기 이메일로 등록됩니다. 승인대기 이메일은 승인된 이메일과 별도의 테이블에 저장되며, 이메일 인증과정을 거친 후에 승인된 이메일로 등록됩니다.</p> <p>XE는 승인대기 이메일 정보를 <code>\Xpressengine\User\Models\PendingEmail</code> 엘로퀀트 모델로 표현하며 <code>user_pending_email</code> 테이블에 저장합니다.</p> <blockquote><p>사이트 관리자가 '이메일 인증' 기능을 사용하도록 설정했을 경우, 가입시 등록한 이메일 승인대기 이메일에 등록됩니다. 만약 이메일 인증 기능을 사용하지 않는다면, 가입과 동시에 일반 이메일로 등록됩니다.</p></blockquote> <p><strong>회원등급</strong></p> <p>한명의 회원은 3개의 회원등급(최고관리자, 관리자, 일반회원) 중 하나를 부여받습니다. <code>최고관리자(super)</code>는 사이트 내에서 모든 권한을 가지는 운영자입니다. <code>관리자(manager)</code>는 일반적으로 사이트를 함께 관리하는 부운영자라고 생각할 수 있습니다. <code>일반회원(member)</code>는 사이트에 사용자인 일반적인 회원입니다.</p> <p>회원등급은 별도의 테이블에 저장되지 않으며, 회원(user) 테이블의 <code>rating</code> 컬럼에 저장됩니다.</p> <p><strong>그룹</strong></p> <p>회원그룹은 회원을 자유롭게 그루핑할 때 사용합니다. 사이트관리자는 자유롭게 회원그룹을 생성할 수 있고, 회원을 다수의 회원그룹에 소속시킬 수 있습니다. 회원그룹은 권한을 부여받을 수 있는 대상이 될 수 있습니다.</p> <p>XE는 그룹 정보를 <code>\Xpressengine\User\Models\UserGroup</code> 엘로퀀트 모델로 표현하며 <code>user_group</code> 테이블에 저장합니다. 또, 회원과 회원이 소속된 그룹의 관계는 <code>user_group_user</code> 테이블에 저장됩니다.</p> <h4 id="회원-관리"><a href="#회원-관리" class="header-anchor">#</a> 회원 관리</h4> <p>회원 및 부가 정보(그룹, 계정, 이메일 등)를 조회하거나 처리할 때에는 <code>XeUser</code> 파사드를 사용하십시오. <code>XeUser</code> 파사드의 실제 구현은 <code>\Xpressengine\User\UserHandler</code>에 정의되어 있습니다.</p> <p><strong>회원 조회</strong></p> <p>회원 아이디로 회원을 조회할 때에는 <code>find</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$username</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getDisplayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>여러 회원을 조회할 수도 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$ids</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$ids</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>다양하고 복잡한 조건(쿼리)으로 회원을 조회할 수도 있습니다. 자세한 사용법은 <a href="https://laravel.com/docs/5.2/eloquent" target="_blank" rel="noopener noreferrer">라라벨 문서<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참조하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// displayName이 'foo'인 회원 조회</span>
<span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'displayName'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// displayName이 foo로 시작하는 모든 회원 조회</span>
<span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'displayName'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'like'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'%foo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>신규 회원 추가</strong></p> <p><code>XeUser</code>는 복잡한 회원 생성 과정을 한번에 처리해주는 <code>create</code> 메소드를 제공합니다. <code>create</code> 메소드는 입력한 신규회원 정보에 대한 유효성 검사후 신규회원을 생성합니다. 또한 회원의 계정(account), 이메일(email) 정보도 자동으로 추가되며, 소속될 그룹에 대한 정보가 전달되었을 경우, 그룹에 추가시켜주기도 합니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'displayName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo@email.com'</span><span class="token punctuation">,</span>
  <span class="token comment">//...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$newUser</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>신규 회원의 계정(account) 정보를 같이 등록할 수도 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'displayName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo@email.com'</span><span class="token punctuation">,</span>
  <span class="token comment">//...</span>
<span class="token punctuation">]</span>

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'account'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'provider'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'facebook'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'token'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'3DIfdkwwfdsie...'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'id of facebook user'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'data'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'...'</span>
<span class="token punctuation">]</span>

<span class="token variable">$newUser</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>신규회원이 소속될 회원그룹을 지정할 수도 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'displayName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo@email.com'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'groupId'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span> <span class="token comment">// 그룹아이디가 21, 23인 그룹에 회원을 소속시킴</span>
<span class="token punctuation">]</span>

<span class="token variable">$newUser</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>만약, 유효성검사를 생략하거나 부가 정보(account, email, group)를 등록을 하지 않고, 순수하게 회원 정보만 추가하고 싶다면 <code>XeUser</code> 파사드 대신, <code>UserRepository</code>를 사용하십시오.</p> <p><code>UserRepository</code>는 <code>XeUser</code> 파사드를 사용하여 로드할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 순수 회원정보만 등록</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'displayName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo@email.com'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'...'</span>
<span class="token punctuation">]</span>

<span class="token variable">$newUser</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>UserRepository</code>의 <code>create</code> 메소드를 곧바로 사용할 때, <code>password</code>를 암호화하지 않고 바로 저장합니다. 먼저 <code>password</code> 필드를 직접 암호화하십시오.</p></blockquote> <p><strong>회원정보 수정</strong></p> <p><code>XeUser::update</code> 메소드를 사용하면 회원정보를 변경할 수 있습니다. 유효성 검사 및 프로필 이미지 처리, 소속그룹의 변경도 동시에 처리합니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'displayName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>회원 삭제</strong></p> <p><code>XeUser::leave</code> 메소드를 사용하면 회원을 삭제(탈퇴)할 수 있습니다. 삭제할 회원의 부가정보(account, email)도 같이 삭제됩니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$ids</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">leave</span><span class="token punctuation">(</span><span class="token variable">$ids</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3명의 회원을 탈퇴시킴</span>
</code></pre></div><p><code>UserRepository</code>의 <code>delete</code> 메소드를 사용하여 회원을 삭제할 수도 있습니다. 단, 이 메소드를 사용하면 삭제될 회원의 부가 정보는 함께 삭제되지 않습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>회원 계정 관리</strong></p> <p><strong>계정 조회</strong></p> <p>회원계정을 조회할 때에는 <code>UserAccountRepository</code>를 사용하십시오. <code>UserAccountRepository</code>는 <code>XeUser</code>파사드를 사용하여 로드할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$userAccountRepository</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>회원이 소유한 계정 목록을 조회할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 회원 아이디로 계정 정보 조회</span>
<span class="token variable">$userId</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'123'</span><span class="token punctuation">;</span>
<span class="token variable">$accounts</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">findByUserId</span><span class="token punctuation">(</span><span class="token variable">$accountId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>위 코드는 아래 코드로 대체할 수도 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$accounts</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">accounts</span><span class="token punctuation">;</span>
</code></pre></div><p><code>User</code>의 <code>getAccountByProvider</code> 메소드를 사용하면 특정 프로바이더(소셜로그인 벤더)의 계정을 조회할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$facebookAccount</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getAccountByProvider</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'facebook'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>좀 더 복잡한 조건으로 계정을 조회하고 싶다면, <code>query</code>메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$query</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">accounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$account</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo@facebook.com'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>계정 생성</strong></p> <p>회원계정을 생성할 때에는 <code>XeUser</code>파사드를 사용할 수 있습니다. <code>createAccount</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 기존 회원에 계정정보 추가하기</span>
<span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$accountData</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo@facebook.com'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'accountId'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'facebookId'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'provider'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'facebook'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'token'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'39238432893,
  '</span>data<span class="token single-quoted-string string">' =&gt; '</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>'
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$newAccount</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">createAccount</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$accountData</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>계정 수정</strong></p> <p>회원계정을 수정할 때에도 <code>XeUser</code>파사드를 사용할 수 있습니다. <code>updateAccount</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$facebookAccount</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getAccountByProvider</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'facebook'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updateAccount</span><span class="token punctuation">(</span><span class="token variable">$facebookAccount</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>token <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'2197548'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>계정 삭제</strong></p> <p>회원계정을 수정할 때에는 <code>XeUser::deleteAccount</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code>XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteAccount</span><span class="token punctuation">(</span><span class="token variable">$facebookAccount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>회원 이메일 관리</strong></p> <p><strong>이메일 조회</strong></p> <p>회원계정을 조회할 때에는 <code>UserEmailRepository</code>를 사용하십시오. <code>UserEmailRepository</code>는 <code>XeUser</code>파사드를 사용하여 로드할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$userEmailRepository</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">emails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이메일 주소로 이메일 정보를 조회할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$email</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">emails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">findByAddress</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo@bar.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>특정 회원이 소유한 모든 이메일을 조회할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$userId</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'123'</span><span class="token punctuation">;</span>
<span class="token variable">$emails</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">emails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">findByUserId</span><span class="token punctuation">(</span><span class="token variable">$userId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>좀 더 복잡한 조건으로 이메일을 조회하고 싶다면, <code>query</code>메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 'foo@'로 시작되는 이메일 검색</span>
<span class="token variable">$query</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">emails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$emails</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'address'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'like'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo@%'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>승인대기 이메일을 조회할 때에는 <code>UserEmailRepository</code> 대신 'PendingEmailRepository'를 사용하십시오. <code>PendingEmailRepository</code>는 <code>XeUser</code>파사드를 사용하여 로드할 수 있습니다. <code>UserEmailRepository</code>와 동일하게 사용할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$userEmailRepository</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pendingEmails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>이메일 생성</strong></p> <p>회원 이메일을 생성할 때에는 <code>XeUser</code>파사드의 <code>createEmail</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$emailData</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'address'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo@bar.com'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$email</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">createEmail</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$emailData</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>createEmail</code> 메소드의 마지막 메소드는 생성하는 이메일의 승인 여부를 지정합니다. <code>true</code>이면 승인된 이메일로 저장되며, <code>false</code>이면 승인대기 이메일로 저장됩니다.</p> <p><strong>이메일 수정</strong></p> <p>기등록 된 이메일(또는 승인대기 이메일)을 수정할 수 있습니다. <code>XeUser::updateEmail</code>을 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$email</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">address</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'foo@bar.com'</span><span class="token punctuation">;</span>
XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updateEmail</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or</span>

XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updateEmail</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'address'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'foo@bar.com'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>이메일 삭제</strong></p> <p>이메일(또는 승인대기 이메일)을 삭제할 수 있습니다. <code>XeUser::deleteEmail</code>을 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code>XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteEmail</span><span class="token punctuation">(</span><span class="token variable">$email</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>회원 그룹 관리</strong></p> <p><strong>그룹 조회</strong></p> <p>...</p> <p><strong>그룹 생성</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 그룹정보 생성</span>
<span class="token variable">$groupData</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'정회원'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'description'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'기본회원'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$group</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">createGroup</span><span class="token punctuation">(</span><span class="token variable">$groupData</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>그룹 수정</strong></p> <div class="language-php extra-class"><pre class="language-php"><code>XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updateGroup</span><span class="token punctuation">(</span><span class="token variable">$group</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'기본회원'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>그룹 삭제</strong></p> <div class="language-php extra-class"><pre class="language-php"><code>XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteGroup</span><span class="token punctuation">(</span><span class="token variable">$group</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="인증"><a href="#인증" class="header-anchor">#</a> 인증</h4> <p>등록된 회원은 사이트에 로그인할 수 있습니다. 사이트에 로그인할 때 XE는 입력된 회원정보에 대한 인증(authentication) 과정을 거친후, 세션(session)에 로그인 한 회원의 정보를 등록합니다. 로그아웃을 할 때에는 반대로 세션에 등록했던 회원 정보를 삭제합니다.</p> <p><code>Auth</code> 파사드를 사용하면 현재 접속한 회원의 로그인, 로그아웃을 비롯한 인증과 관련된 기능을 수행할 수 있습니다.</p> <p><strong>현재 로그인한 사용자 조회</strong></p> <p>현재 로그인한 사용자를 조회할 때에는 <code>user</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>또는 request 인스턴스를 사용할 수도 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>로그인한 사용자의 아이디(id)만 조회할 수도 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$loggedUserId</span> <span class="token operator">=</span> Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>로그인 상태 조회</strong></p> <p><code>check</code> 메소드를 사용하면 접속 중인 사용자가 로그인을 한 상태인지 조회할 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The user is logged in...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>로그인</strong></p> <p>등록된 회원의 인스턴스를 획득하고 있다면, <code>login</code> 메소드를 사용하여 해당 회원을 로그인시킬 수 있습니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> XeUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>해당 회원이 현재와 동일한 환경(단말기의 브라우저)에서 다음에 다시 사이트에 접속했을 때, 자동으로 로그인 처리를 하는 '로그인 유지' 기능을 사용할 수 있습니다. <code>login</code> 메소드의 두번째 파라메터로 <code>true</code>를 사용하면, 해당 회원에게 '로그인 유지' 기능을 활성화시킵니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Login and &quot;remember&quot; the given user...</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>로그인 시도</strong></p> <p><code>login</code> 메소드는 회원정보의 인증 과정을 거치지 않고, 회원 인스턴스를 통해 바로 로그인 처리를 합니다. 만약 회원의 입력한 정보를 인증한 후 로그인까지 시도하고 싶을 때에는 <code>attempt</code>메소드를 사용하십시오.</p> <p><code>attempt</code> 메소드를 실행하면 입력된 정보가 등록된 회원정보와 일치하는지 검사합니다. 회원정보가 일치한다면 해당 회원을 로그인시킵니다.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attempt</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$password</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Authentication passed...</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">intended</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'dashboard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>만약 '로그인 유지' 기능을 사용하고싶을 때에는 두번째 파라메터로 <code>true</code>를 전달하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attempt</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$password</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The user is being remembered...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>로그아웃</strong></p> <p><code>logout</code> 메소드를 사용하십시오.</p> <div class="language-php extra-class"><pre class="language-php"><code>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/xe3-doc/08. 서비스/service-mail.html" class="prev">
        메일
      </a></span> <span class="next"><a href="/xe3-doc/08. 서비스/service-menu_module.html">
        메뉴/모듈
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xe3-doc/assets/js/app.76304fcc.js" defer></script><script src="/xe3-doc/assets/js/2.587667cf.js" defer></script><script src="/xe3-doc/assets/js/80.51578898.js" defer></script>
  </body>
</html>
